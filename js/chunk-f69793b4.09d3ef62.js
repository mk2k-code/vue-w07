(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f69793b4"],{1799:function(t,e,a){"use strict";var n=a("7a23"),c={"aria-label":"Page navigation example"},i={class:"pagination justify-content-center"},o=Object(n["i"])("span",{"aria-hidden":"true"},"«",-1),s={key:0,class:"page-link"},r=Object(n["i"])("span",{"aria-hidden":"true"},"»",-1);function u(t,e,a,u,p,d){return Object(n["u"])(),Object(n["e"])("nav",c,[Object(n["i"])("ul",i,[Object(n["i"])("li",{class:["page-item",{disabled:1===a.pages.current_page}]},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=Object(n["Q"])((function(t){return d.emitPages(a.pages.current_page-1)}),["prevent"]))},[o])],2),(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["B"])(a.pages.total_pages,(function(t,e){return Object(n["u"])(),Object(n["e"])("li",{key:e,class:["page-item",{active:t===a.pages.current_page}]},[t===a.pages.current_page?(Object(n["u"])(),Object(n["e"])("span",s,Object(n["G"])(t),1)):(Object(n["u"])(),Object(n["e"])("a",{key:1,class:"page-link",href:"#",onClick:Object(n["Q"])((function(e){return d.emitPages(t)}),["prevent"])},Object(n["G"])(t),9,["onClick"]))],2)})),128)),Object(n["i"])("li",{class:["page-item",{disabled:a.pages.current_page===a.pages.total_pages}]},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=Object(n["Q"])((function(t){return d.emitPages(a.pages.current_page+1)}),["prevent"]))},[r])],2)])])}var p={props:["pages"],methods:{emitPages:function(t){this.$emit("emit-pages",t)}}};p.render=u;e["a"]=p},"1dde":function(t,e,a){var n=a("d039"),c=a("b622"),i=a("2d00"),o=c("species");t.exports=function(t){return i>=51||!n((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"5d74":function(t,e,a){"use strict";a.r(e);var n=a("7a23"),c={class:"container"},i={class:"mt-4"},o={class:"table align-middle"},s=Object(n["i"])("thead",null,[Object(n["i"])("tr",null,[Object(n["i"])("th",null,"圖片"),Object(n["i"])("th",null,"商品名稱"),Object(n["i"])("th",null,"價格"),Object(n["i"])("th")])],-1),r={style:{width:"200px"}},u={class:"btn-group btn-group-sm"};function p(t,e,a,p,d,g){var h=Object(n["D"])("Loading"),l=Object(n["D"])("Pagination");return Object(n["u"])(),Object(n["e"])("div",c,[Object(n["i"])(h,{active:d.isLoading,"z-index":8888},null,8,["active"]),Object(n["i"])("div",i,[Object(n["i"])("table",o,[s,Object(n["i"])("tbody",null,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["B"])(d.products,(function(e){return Object(n["u"])(),Object(n["e"])("tr",{key:e.id},[Object(n["i"])("td",r,[Object(n["i"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}]},null,4)]),Object(n["i"])("td",null,Object(n["G"])(e.title),1),Object(n["i"])("td",null,Object(n["G"])(t.$filters.currency(e.price)),1),Object(n["i"])("td",null,[Object(n["i"])("div",u,[Object(n["i"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return g.getProduct(e.id)}}," 查看內容 ",8,["onClick"]),Object(n["i"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return g.addToCart(e.id)}}," 加入24d購物車 ",8,["onClick"])])])])})),128))])]),Object(n["i"])(l,{pages:d.pagination,onEmitPages:g.getProducts},null,8,["pages","onEmitPages"])])])}a("99af");var d=a("24bd"),g=a("1799"),h={data:function(){return{isLoading:!1,products:[],product:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},pagination:{},currentPage:1,coupon_code:""}},components:{Pagination:g["a"]},computed:{page:function(){return console.log(this.$router.params),this.$router.params.page}},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e,this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/products?page=").concat(e);this.$http.get(a).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination):t.$httpMessageState(e,"取得產品項目"),t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},getProduct:function(t){this.$router.push("/user/product/".concat(t))},addToCart:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var n={product_id:t,qty:a},c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/cart");this.$http.post(c,{data:n}).then((function(t){t.data.success?(e.isLoading=!1,e.$httpMessageState(t,"加入購物車"),e.getProducts(e.currentPage),e.getShoppingCart()):e.$httpMessageState(t,"加入購物車")})).catch((function(t){e.isLoading=!1,console.log(t)}))},getShoppingCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/cart");this.$http.get(e).then((function(e){e.data.success?(t.cart=e.data.data,d["a"].emit("update-cart")):t.$httpMessageState(e,"取得購物車資料"),t.isLoading=!1})).catch((function(e){t.isLoading=!1,console.log(e)}))},updateShoppingCart:function(t){var e=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/cart/").concat(t.id),n={product_id:t.product.id,qty:t.qty};this.$http.put(a,{data:n}).then((function(t){t.data.success?(e.$httpMessageState(t,"更新單筆數量"),e.getShoppingCart()):e.$httpMessageState(t,"更新單筆數量"),e.isLoading=!1})).catch((function(t){e.isLoading=!1,console.log(t)}))},addCoupon:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/coupon"),a={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:a}).then((function(e){t.$httpMessageState(e,"加入優惠券"),t.getShoppingCart(),t.isLoading=!1})).catch((function(e){t.isLoading=!1,console.log(e)}))},createOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/order"),a=this.form;this.$http.post(e,{data:a}).then((function(e){e.data.success?(t.$httpMessageState(e,"送出訂單"),t.$refs.form.resetForm(),t.$router.push("/user/checkout/".concat(e.data.orderId))):t.$httpMessageState(e,"送出訂單"),t.isLoading=!1})).catch((function(e){t.isLoading=!1,console.log(e)}))},delShoppingCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/carts");this.$http.delete(e).then((function(e){e.data.success?(t.$httpMessageState(e,"清空購物車"),t.getShoppingCart()):t.$httpMessageState(e,"清空購物車"),t.isLoading=!1})).catch((function(e){t.isLoading=!1,console.log(e)}))},delCartItem:function(t){var e=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/cart/").concat(t);this.$http.delete(a).then((function(t){t.data.success?(e.$httpMessageState(t,"刪除單項"),e.getShoppingCart()):e.$httpMessageState(t,"刪除單項"),e.isLoading=!1})).catch((function(t){e.isLoading=!1,console.log(t)}))}},created:function(){this.getProducts(),this.getShoppingCart()}};h.render=p;e["default"]=h},8418:function(t,e,a){"use strict";var n=a("c04e"),c=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var o=n(e);o in t?c.f(t,o,i(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var n=a("23e7"),c=a("d039"),i=a("e8b5"),o=a("861d"),s=a("7b0b"),r=a("50c4"),u=a("8418"),p=a("65f0"),d=a("1dde"),g=a("b622"),h=a("2d00"),l=g("isConcatSpreadable"),b=9007199254740991,f="Maximum allowed index exceeded",j=h>=51||!c((function(){var t=[];return t[l]=!1,t.concat()[0]!==t})),v=d("concat"),O=function(t){if(!o(t))return!1;var e=t[l];return void 0!==e?!!e:i(t)},m=!j||!v;n({target:"Array",proto:!0,forced:m},{concat:function(t){var e,a,n,c,i,o=s(this),d=p(o,0),g=0;for(e=-1,n=arguments.length;e<n;e++)if(i=-1===e?o:arguments[e],O(i)){if(c=r(i.length),g+c>b)throw TypeError(f);for(a=0;a<c;a++,g++)a in i&&u(d,g,i[a])}else{if(g>=b)throw TypeError(f);u(d,g++,i)}return d.length=g,d}})}}]);
//# sourceMappingURL=chunk-f69793b4.09d3ef62.js.map