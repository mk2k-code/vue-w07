(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-596fd690"],{"0c78":function(t,e,c){"use strict";c.r(e);var i=c("7a23"),l={class:"table mt-4"},a=Object(i["i"])("thead",null,[Object(i["i"])("tr",null,[Object(i["i"])("th",null,"購買時間"),Object(i["i"])("th",null,"Email"),Object(i["i"])("th",null,"購買款項"),Object(i["i"])("th",null,"應付金額"),Object(i["i"])("th",null,"是否付款"),Object(i["i"])("th",null,"編輯")])],-1),n={class:"list-unstyled"},r={class:"text-right"},d={class:"form-check form-switch"},o={key:0},b={key:1},s={class:"btn-group"};function u(t,e,c,u,O,j){var p=Object(i["D"])("Loading"),h=Object(i["D"])("OrderModal"),m=Object(i["D"])("DelModal"),f=Object(i["D"])("Pagination");return Object(i["u"])(),Object(i["e"])(i["a"],null,[Object(i["i"])(p,{active:O.isLoading,"z-index":8888},null,8,["active"]),Object(i["i"])("table",l,[a,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(O.orders,(function(e,c){return Object(i["u"])(),Object(i["e"])(i["a"],{key:c},[O.orders.length?(Object(i["u"])(),Object(i["e"])("tr",{key:0,class:{"text-secondary":!e.is_paid}},[Object(i["i"])("td",null,Object(i["G"])(t.$filters.date(e.create_at)),1),Object(i["i"])("td",null,[e.user?(Object(i["u"])(),Object(i["e"])("span",{key:0,textContent:Object(i["G"])(e.user.email)},null,8,["textContent"])):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("ul",n,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(e.products,(function(t,e){return Object(i["u"])(),Object(i["e"])("li",{key:e},Object(i["G"])(t.product.title)+" 數量："+Object(i["G"])(t.qty)+" "+Object(i["G"])(t.product.unit),1)})),128))])]),Object(i["i"])("td",r,Object(i["G"])(t.$filters.currency(e.total)),1),Object(i["i"])("td",null,[Object(i["i"])("div",d,[Object(i["P"])(Object(i["i"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return j.updatePaid(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[i["J"],e.is_paid]]),Object(i["i"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(i["u"])(),Object(i["e"])("span",o,"已付款")):(Object(i["u"])(),Object(i["e"])("span",b,"未付款"))],8,["for"])])]),Object(i["i"])("td",null,[Object(i["i"])("div",s,[Object(i["i"])("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return j.openModal("edit",e)}},"檢視 ",8,["onClick"]),Object(i["i"])("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return j.openModal("delete",e)}},"刪除 ",8,["onClick"])])])],2)):Object(i["f"])("",!0)],64)})),128))])]),Object(i["i"])(h,{order:O.tempOrder,onUpdatePaid:j.updatePaid,ref:"orderModal"},null,8,["order","onUpdatePaid"]),Object(i["i"])(m,{item:O.tempOrder,onDelItem:j.delOrder,ref:"delModal"},null,8,["item","onDelItem"]),Object(i["i"])(f,{pages:O.pagination,onEmitPages:j.getOrders},null,8,["pages","onEmitPages"])],64)}var O=c("5530"),j=(c("99af"),c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),p={class:"modal-dialog modal-xl",role:"document"},h={class:"modal-content border-0"},m=Object(i["i"])("div",{class:"modal-header bg-dark text-white"},[Object(i["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(i["i"])("span",null,"訂單細節")]),Object(i["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},g={class:"row"},y={class:"col-md-4"},k=Object(i["i"])("h3",null,"用戶資料",-1),v={class:"table"},x={key:0},M=Object(i["i"])("th",{style:{width:"100px"}},"姓名",-1),w=Object(i["i"])("th",null,"Email",-1),G=Object(i["i"])("th",null,"電話",-1),$=Object(i["i"])("th",null,"地址",-1),P={class:"col-md-8"},_=Object(i["i"])("h3",null,"訂單細節",-1),C={class:"table"},D=Object(i["i"])("th",{style:{width:"100px"}},"訂單編號",-1),L=Object(i["i"])("th",null,"下單時間",-1),S=Object(i["i"])("th",null,"付款時間",-1),U={key:0},E={key:1},J=Object(i["i"])("th",null,"付款狀態",-1),B={key:0,class:"text-success"},N={key:1,class:"text-muted"},V=Object(i["i"])("th",null,"總金額",-1),q=Object(i["i"])("h3",null,"選購商品",-1),I={class:"table"},z=Object(i["i"])("thead",null,[Object(i["i"])("tr")],-1),F={class:"text-end"},A={class:"d-flex justify-content-end"},H={class:"form-check"},K={class:"form-check-label",for:"flexCheckDefault"},Q={key:0},R={key:1},T={class:"modal-footer"},W=Object(i["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function X(t,e,c,l,a,n){return Object(i["u"])(),Object(i["e"])("div",j,[Object(i["i"])("div",p,[Object(i["i"])("div",h,[m,Object(i["i"])("div",f,[Object(i["i"])("div",g,[Object(i["i"])("div",y,[k,Object(i["i"])("table",v,[a.tempOrder.user?(Object(i["u"])(),Object(i["e"])("tbody",x,[Object(i["i"])("tr",null,[M,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.name),1)]),Object(i["i"])("tr",null,[w,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.email),1)]),Object(i["i"])("tr",null,[G,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.tel),1)]),Object(i["i"])("tr",null,[$,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.user.address),1)])])):Object(i["f"])("",!0)])]),Object(i["i"])("div",P,[_,Object(i["i"])("table",C,[Object(i["i"])("tbody",null,[Object(i["i"])("tr",null,[D,Object(i["i"])("td",null,Object(i["G"])(a.tempOrder.id),1)]),Object(i["i"])("tr",null,[L,Object(i["i"])("td",null,Object(i["G"])(t.$filters.date(a.tempOrder.create_at)),1)]),Object(i["i"])("tr",null,[S,Object(i["i"])("td",null,[a.tempOrder.paid_date?(Object(i["u"])(),Object(i["e"])("span",U,Object(i["G"])(t.$filters.date(a.tempOrder.paid_date)),1)):(Object(i["u"])(),Object(i["e"])("span",E,"時間不正確"))])]),Object(i["i"])("tr",null,[J,Object(i["i"])("td",null,[a.tempOrder.is_paid?(Object(i["u"])(),Object(i["e"])("strong",B,"已付款")):(Object(i["u"])(),Object(i["e"])("span",N,"尚未付款"))])]),Object(i["i"])("tr",null,[V,Object(i["i"])("td",null,Object(i["G"])(t.$filters.currency(a.tempOrder.total)),1)])])]),q,Object(i["i"])("table",I,[z,Object(i["i"])("tbody",null,[(Object(i["u"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(a.tempOrder.products,(function(e){return Object(i["u"])(),Object(i["e"])("tr",{key:e.id},[Object(i["i"])("th",null,Object(i["G"])(e.product.title),1),Object(i["i"])("td",null,Object(i["G"])(e.qty)+" / "+Object(i["G"])(e.product.unit),1),Object(i["i"])("td",F,Object(i["G"])(t.$filters.currency(e.final_total)),1)])})),128))])]),Object(i["i"])("div",A,[Object(i["i"])("div",H,[Object(i["P"])(Object(i["i"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.tempOrder.is_paid=t})},null,512),[[i["J"],a.tempOrder.is_paid]]),Object(i["i"])("label",K,[a.tempOrder.is_paid?(Object(i["u"])(),Object(i["e"])("span",Q,"已付款")):(Object(i["u"])(),Object(i["e"])("span",R,"未付款"))])])])])])]),Object(i["i"])("div",T,[W,Object(i["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(e){return t.$emit("update-paid",a.tempOrder)})},"修改付款狀態 ")])])])],512)}var Y=c("e0ae"),Z={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},emits:["update-paid"],mixins:[Y["a"]],inject:["emitter"],watch:{order:function(){this.tempOrder=this.order}}};Z.render=X;var tt=Z,et=c("6ff1"),ct=c("1799"),it={data:function(){return{orders:{},isNew:!1,isLoading:!1,tempOrder:{},pagination:{},currentPage:1}},components:{OrderModal:tt,DelModal:et["a"],Pagination:ct["a"]},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/orders?page=").concat(e);this.$http.get(c).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1})).catch((function(t){console.log(t)}))},openModal:function(t,e){"new"===t?(this.isNew=!0,this.$refs.orderModal.showModal()):"edit"===t?(this.isNew=!1,this.tempOrder=Object(O["a"])({},e),this.$refs.orderModal.showModal()):"delete"===t&&(this.tempOrder=Object(O["a"])({},e),this.$refs.delModal.showModal())},updatePaid:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/order/").concat(t.id),i={is_paid:t.is_paid};this.$http.put(c,{data:i}).then((function(t){e.isLoading=!1,e.$refs.orderModal.hideModal(),e.getOrders(e.currentPage),e.$httpMessageState(t,"更新付款狀態")})).catch((function(t){console.log(t)}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(){t.$refs.delModal.hideModal(),t.getOrders(t.currentPage),t.$httpMessageState(res,"刪除一筆訂單")})).catch((function(t){console.log(t)}))}},created:function(){this.getOrders()}};it.render=u;e["default"]=it},b0c0:function(t,e,c){var i=c("83ab"),l=c("9bf2").f,a=Function.prototype,n=a.toString,r=/^\s*function ([^ (]*)/,d="name";i&&!(d in a)&&l(a,d,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-596fd690.8e37910e.js.map