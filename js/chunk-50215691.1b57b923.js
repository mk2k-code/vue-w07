(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50215691"],{dc0d:function(t,e,c){"use strict";c.r(e);var o=c("7a23"),i={id:"app"},n={class:"container"},a={class:"text-end mt-4"},r={class:"table mt-4"},l=Object(o["i"])("thead",null,[Object(o["i"])("tr",null,[Object(o["i"])("th",{width:"120"},"分類"),Object(o["i"])("th",{width:"240"},"產品名稱"),Object(o["i"])("th",{width:"120"},"原價"),Object(o["i"])("th",{width:"120"},"售價"),Object(o["i"])("th",{width:"100"},"是否啟用"),Object(o["i"])("th",{width:"120"},"編輯")])],-1),d={class:"form-check form-switch"},s={key:0},u={key:1},p={class:"btn-group"};function b(t,e,c,b,m,j){var O=Object(o["D"])("Loading"),h=Object(o["D"])("ProdModal"),f=Object(o["D"])("DelModal"),g=Object(o["D"])("pagination");return Object(o["u"])(),Object(o["e"])("div",i,[Object(o["i"])(O,{active:m.isLoading,"z-index":8888},null,8,["active"]),Object(o["i"])("div",n,[Object(o["i"])("div",a,[Object(o["i"])("button",{class:"btn btn-dark",onClick:e[1]||(e[1]=function(t){return j.openModal("new")})},"建立新產品")]),Object(o["i"])("table",r,[l,Object(o["i"])("tbody",null,[(Object(o["u"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(m.products,(function(e){return Object(o["u"])(),Object(o["e"])("tr",{key:e.id},[Object(o["i"])("td",null,Object(o["G"])(e.category),1),Object(o["i"])("td",null,Object(o["G"])(e.title),1),Object(o["i"])("td",null,Object(o["G"])(t.$filters.currency(e.origin_price)),1),Object(o["i"])("td",null,Object(o["G"])(t.$filters.currency(e.price)),1),Object(o["i"])("td",null,[Object(o["i"])("div",d,[Object(o["P"])(Object(o["i"])("input",{class:"form-check-input",type:"checkbox",id:"prodSwitch".concat(e.id),"true-value":1,"false-value":0,"onUpdate:modelValue":function(t){return e.is_enabled=t},onChange:function(t){return j.update(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[o["J"],e.is_enabled]]),Object(o["i"])("label",{class:"form-check-label",for:"prodSwitch".concat(e.id)},[1===e.is_enabled?(Object(o["u"])(),Object(o["e"])("span",s,"啟用")):(Object(o["u"])(),Object(o["e"])("span",u,"未啟用"))],8,["for"])])]),Object(o["i"])("td",null,[Object(o["i"])("div",p,[Object(o["i"])("button",{type:"button",class:"btn btn-outline-dark btn-sm",onClick:function(t){return j.openModal("edit",e)}},"編輯 ",8,["onClick"]),Object(o["i"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return j.openModal("delete",e)}},"刪除 ",8,["onClick"])])])])})),128))])])]),Object(o["i"])(h,{product:m.tempProduct,isNew:m.isNew,onUpdateProduct:j.updateProduct,ref:"prodModal"},null,8,["product","isNew","onUpdateProduct"]),Object(o["i"])(f,{item:m.tempProduct,onDelItem:j.delProduct,ref:"delModal"},null,8,["item","onDelItem"]),Object(o["i"])(g,{pages:m.pagination,onEmitPages:j.getProducts},null,8,["pages","onEmitPages"])])}var m=c("5530"),j=(c("99af"),c("6ff1")),O=c("1799"),h=(c("a4d3"),c("e01a"),{class:"modal fade",id:"prodModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),f={class:"modal-dialog modal-xl"},g={class:"modal-content border-1"},P={class:"modal-header bg-dark text-white text-center"},v={id:"prodModalLabel",class:"modal-title w-100"},y={key:0},k={key:1},w=Object(o["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),U={class:"modal-body"},M={class:"row"},x={class:"col-sm-4"},$={class:"form-group"},L=Object(o["i"])("label",{for:"imageUrl"},"主要圖片",-1),S=Object(o["i"])("div",{class:"mb-1"},"多圖新增",-1),V={key:0},C={class:"form-group"},_=Object(o["i"])("label",{for:"imageUrl"},"圖片網址",-1),K={key:0},N={key:1},D={key:1},I={class:"col-sm-8"},G={class:"form-group"},J=Object(o["i"])("label",{for:"title"},"標題",-1),B={class:"row"},A={class:"form-group col-md-6"},E=Object(o["i"])("label",{for:"category"},"分類",-1),z={class:"form-group col-md-6"},q=Object(o["i"])("label",{for:"price"},"單位",-1),F={class:"row"},H={class:"form-group col-md-6"},Q=Object(o["i"])("label",{for:"origin_price"},"原價",-1),R={class:"form-group col-md-6"},T=Object(o["i"])("label",{for:"price"},"售價",-1),W=Object(o["i"])("hr",null,null,-1),X={class:"form-group"},Y=Object(o["i"])("label",{for:"description"},"產品描述",-1),Z={class:"form-group"},tt=Object(o["i"])("label",{for:"content"},"說明內容",-1),et={class:"form-group"},ct={class:"form-check"},ot=Object(o["i"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),it={class:"modal-footer"},nt=Object(o["i"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function at(t,e,c,i,n,a){return Object(o["u"])(),Object(o["e"])("div",h,[Object(o["i"])("div",f,[Object(o["i"])("div",g,[Object(o["i"])("div",P,[Object(o["i"])("h5",v,[c.isNew?(Object(o["u"])(),Object(o["e"])("span",y,"新增產品")):(Object(o["u"])(),Object(o["e"])("span",k,"編輯產品"))]),w]),Object(o["i"])("div",U,[Object(o["i"])("div",M,[Object(o["i"])("div",x,[Object(o["i"])("div",$,[L,Object(o["P"])(Object(o["i"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return n.tempProduct.imageUrl=t}),type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,512),[[o["K"],n.tempProduct.imageUrl]]),Object(o["i"])("img",{class:"img-fluid",src:n.tempProduct.imageUrl},null,8,["src"])]),S,Array.isArray(n.tempProduct.imagesUrl)?(Object(o["u"])(),Object(o["e"])("div",V,[(Object(o["u"])(!0),Object(o["e"])(o["a"],null,Object(o["B"])(n.tempProduct.imagesUrl,(function(t,e){return Object(o["u"])(),Object(o["e"])("div",{class:"mb-1",key:e},[Object(o["i"])("div",C,[_,Object(o["P"])(Object(o["i"])("input",{"onUpdate:modelValue":function(t){return n.tempProduct.imagesUrl[e]=t},type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,["onUpdate:modelValue"]),[[o["K"],n.tempProduct.imagesUrl[e]]])]),Object(o["i"])("img",{class:"img-fluid",src:t},null,8,["src"])])})),128)),!n.tempProduct.imagesUrl.length||n.tempProduct.imagesUrl[n.tempProduct.imagesUrl.length-1]?(Object(o["u"])(),Object(o["e"])("div",K,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[2]||(e[2]=function(t){return n.tempProduct.imagesUrl.push("")})},"新增圖片")])):(Object(o["u"])(),Object(o["e"])("div",N,[Object(o["i"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[3]||(e[3]=function(t){return n.tempProduct.imagesUrl.pop()})},"刪除圖片")]))])):(Object(o["u"])(),Object(o["e"])("div",D,[Object(o["i"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[4]||(e[4]=function(){return a.createImages&&a.createImages.apply(a,arguments)})},"新增圖片")]))]),Object(o["i"])("div",I,[Object(o["i"])("div",G,[J,Object(o["P"])(Object(o["i"])("input",{id:"title","onUpdate:modelValue":e[5]||(e[5]=function(t){return n.tempProduct.title=t}),type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[o["K"],n.tempProduct.title]])]),Object(o["i"])("div",B,[Object(o["i"])("div",A,[E,Object(o["P"])(Object(o["i"])("input",{id:"category","onUpdate:modelValue":e[6]||(e[6]=function(t){return n.tempProduct.category=t}),type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[o["K"],n.tempProduct.category]])]),Object(o["i"])("div",z,[q,Object(o["P"])(Object(o["i"])("input",{id:"unit","onUpdate:modelValue":e[7]||(e[7]=function(t){return n.tempProduct.unit=t}),type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[o["K"],n.tempProduct.unit]])])]),Object(o["i"])("div",F,[Object(o["i"])("div",H,[Q,Object(o["P"])(Object(o["i"])("input",{id:"origin_price","onUpdate:modelValue":e[8]||(e[8]=function(t){return n.tempProduct.origin_price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[o["K"],n.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["i"])("div",R,[T,Object(o["P"])(Object(o["i"])("input",{id:"price","onUpdate:modelValue":e[9]||(e[9]=function(t){return n.tempProduct.price=t}),type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[o["K"],n.tempProduct.price,void 0,{number:!0}]])])]),W,Object(o["i"])("div",X,[Y,Object(o["P"])(Object(o["i"])("textarea",{id:"description","onUpdate:modelValue":e[10]||(e[10]=function(t){return n.tempProduct.description=t}),type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\n              ",512),[[o["K"],n.tempProduct.description]])]),Object(o["i"])("div",Z,[tt,Object(o["P"])(Object(o["i"])("textarea",{id:"description","onUpdate:modelValue":e[11]||(e[11]=function(t){return n.tempProduct.content=t}),type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\n              ",512),[[o["K"],n.tempProduct.content]])]),Object(o["i"])("div",et,[Object(o["i"])("div",ct,[Object(o["P"])(Object(o["i"])("input",{id:"is_enabled","onUpdate:modelValue":e[12]||(e[12]=function(t){return n.tempProduct.is_enabled=t}),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["J"],n.tempProduct.is_enabled]]),ot])])])])]),Object(o["i"])("div",it,[nt,Object(o["i"])("button",{type:"button",class:"btn btn-primary",onClick:e[13]||(e[13]=function(e){return t.$emit("update-product",n.tempProduct)})},"確認")])])])],512)}var rt=c("e0ae"),lt={props:{product:{type:Object,default:function(){return{imagesUrl:[]}}},isNew:{type:Boolean,default:!1}},data:function(){return{tempProduct:{},modal:""}},emits:["update-product"],mixins:[rt["a"]],inject:["emitter"],watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}},mounted:function(){},methods:{createImages:function(){this.tempProduct.imagesUrl=[],this.tempProduct.imagesUrl.push("")}}};lt.render=at;var dt=lt,st={data:function(){return{products:[],tempProduct:{},isNew:!1,isLoading:!1,pagination:{},currentPage:1}},components:{ProdModal:dt,DelModal:j["a"],Pagination:O["a"]},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/products?page=").concat(e);console.log(c),this.isLoading=!0,this.$http.get(c).then((function(e){if(e.data.success){var c=e.data,o=c.products,i=c.pagination;t.products=o,t.pagination=i,t.isLoading=!1}else alert(e.data.message),t.$httpMessageState(e,"第".concat(t.currentPage,"頁載入")),t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}))},openModal:function(t,e){"new"===t?(this.tempProduct={imagesUrl:[]},this.isNew=!0,this.$refs.prodModal.showModal()):"edit"===t?(this.tempProduct=Object(m["a"])({},e),this.isNew=!1,this.$refs.prodModal.showModal()):"delete"===t&&(this.tempProduct=Object(m["a"])({},e),this.$refs.delModal.showModal())},update:function(t){this.tempProduct=Object(m["a"])({},t),this.updateProduct(this.tempProduct)},updateProduct:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/product"),c="post",o="新增產品";this.isNew||(e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/product/").concat(this.tempProduct.id),c="put",o="更新產品"),this.$http[c](e,{data:this.tempProduct}).then((function(e){e.data.success?(t.$httpMessageState(e,o),t.$refs.prodModal.hideModal(),t.getProducts(t.currentPage),t.isLoading=!1):(t.$httpMessageState(e,o),t.isLoading=!1)})).catch((function(t){console.log(t)}))},delProduct:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("mark01","/admin/product/").concat(this.tempProduct.id);this.$http.delete(e).then((function(e){e.data.success?(t.$httpMessageState(e,"刪除產品"),t.$refs.delModal.hideModal(),t.getProducts(t.currentPage),t.isLoading=!1):(t.$httpMessageState(e),t.isLoading=!1)})).catch((function(e){console.log(e),t.isLoading=!1}))}}};st.render=b;e["default"]=st},e01a:function(t,e,c){"use strict";var o=c("23e7"),i=c("83ab"),n=c("da84"),a=c("5135"),r=c("861d"),l=c("9bf2").f,d=c("e893"),s=n.Symbol;if(i&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var u={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new s(t):void 0===t?s():s(t);return""===t&&(u[e]=!0),e};d(p,s);var b=p.prototype=s.prototype;b.constructor=p;var m=b.toString,j="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;l(b,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=m.call(t);if(a(u,t))return"";var c=j?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-50215691.1b57b923.js.map